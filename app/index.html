<!DOCTYPE html>
<html ng-app="devResources">
<head lang="en">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" type="text/css" href="styles/main.css">

  <!-- Bootstrap -->
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <title>Web Developer Resources</title>
</head>
<body>


<div ng-controller="MainController">


<ol>
  <li>Make a json file out of existing files in a folder</li>
  <li>Use the variable name of the filenames in an array<br>
    -regex 3 parts (lab, product code (optional), date)<br>
    get lab code:  /([A-Z]){2,3}(?=-)+/  (2-3 letters followed by a dash that we don't capture)<br>
    get product code: /(?:-)+(\d){3}(?=-)+/  (it's capturing the first dash before teh 3 digits also)<br>
    get date:  /(?:-)(\d){6}/
  </li>
  <li>Thumbnail image from pdf</li>
  <li>Allow people to drag and drop - Upload</li>
</ol>









  <!--user can add heading, url link, body description, image, category as a checklist (html, css, javascript, jquery, angular, node, etc.), type of resource as checklist: practice exercises, tool to use, video, reading, pictures, examples-->

  <h1>Promo Code Marketing Pieces</h1>
  <!--Add Icon-->
<!--  <button class="btn btn-lg btn-info btn-blue" ng-click="addresource=!addresource; searchresource=false;">
    <span class="glyphicon glyphicon-plus"></span>  Add New Resource
  </button>-->
  <!--Search Icon-->
<!--  <button class="btn btn-lg btn-success" ng-click="searchresource=!searchresource; addresource=false;">
    <span class="glyphicon glyphicon-search"></span> Search Resources
  </button>-->
  <p></p>
UPLOAD FILE HERE
  <!-- Add new file-->
  <div class="addNewFile">
    <input type="submit" ng-click='add()' class="btn btn-primary" value="Add Resource">
    <input type="reset" ng-click='' class="btn btn-warning" value="Cancel" >
  </div>

  <!--Form to Add Resource that only shows when user clicks the "Add New Resource" button-->

<!--  <form id="addlink" ng-show="addresource" >
    <h3>Add a resource for Web Developers</h3>
    <div class="row">
      <div class="col-md-8" >
        title: <input type="text" ng-model="link.title"><p></p>
        URL:   <input type="url" ng-model="link.link"><p></p>
        Description:<br> <textarea rows="4" cols="75" ng-model="link.description"></textarea><p></p>
        <p></p>
      </div>
      <div class="col-md-4" >
        Category: <br>
        <input type="checkbox" name="category" ng-model="link.category.html" value="html">html<br>
        <input type="checkbox" name="category" ng-model="link.category.css" value="css">css<br>
        <p></p>
        Type of Resource:<br>
        <input type="checkbox" name="resourcetype" ng-model="link.resourcetype.practice" value="practice" >practice exercises <br>
        <input type="checkbox" name="resourcetype" ng-model="link.resourcetype.video" value="video">video<br>
        <p></p>
      </div>
    </div>
    <div class="row">

      <div class="buttonsforAddResource">
        <input type="submit" ng-click='addLink(); addresource=false' class="buttonkey btn btn-info btn-lg btn-blue btn-primary" value="Save Resource">
        <input type="reset" ng-click='addresource=false' class="buttonkey btn btn-info btn-lg btn-blue btn-warning" value="Cancel" >
      </div>
    </div>
  </form>-->



<section id="showmarketingsamples">

  <div class="container">
    <div class="row">
        <div class="col-md-6">
          <h4>Mailer ID</h4>
        </div>
        <div class="col-md-3">
          <h4>Lab</h4>
        </div>
        <div class="col-md-2">
          <h4>Date</h4>
        </div>
        <div class="col-md-1">
          <h4>See File</h4>
        </div>
    </div>

  <!-- Search database-->
  <div class="row">
    <div class="col-md-5">
      <input type="text" ng-model="search.promocode" placeholder="search mailer ID">
    </div>
    <div class="col-md-3">
      <select ng-model="search.labcode">
        <option></option>
        <option value="gl">Glidewell Dental</option>
        <option value="bdl">BDL Prosthetics</option>
        <option value="dt">Digitech Lab</option>
        <option value="nw">New West Lab</option>
        <option value="lv">Las Vegas</option>
      </select>
    </div>
    <div class="col-md-3">
      <input type="text" ng-model="search.date" placeholder="search date">
    </div>
    <div class="col-md-1">

    </div>
  </div>

  <!-- Show database-->
  <div class="row" ng-repeat='mailer in mailers | filter:search | orderBy:date' >
    <div class="col-md-6">
      <a ng-href="/promocode-Filter/marketing-samples/{{mailer.link}}.pdf" >{{mailer.name}}</a>
    </div>
    <div class="col-md-3">
      {{mailer.labcode}}
    </div>
    <div class="col-md-2">
      {{mailer.date}}  - Month: {{mailer.month}}, Year: {{mailer.year}}
    </div>
    <div class="col-md-1">
      <a ng-href="/promocode-Filter/marketing-samples/{{mailer.link}}.pdf"class="btn btn-primary btn-default">See File</a>
      <!--<br>-->
      <!--<button ng-click="getThumbnail('/promocode-Filter/marketing-samples/'+{{link.filename}}, {{link.promocode}}">See thumbnail</button><div id="{{link.promocode}}"></div>-->
      <!--<br>-->
      <!--<embed ng-src="{{content}}" style="width:200px;height:200px;"></embed>-->
      <!--<object ng-show="content" data="{{content}}" type="application/pdf" style="width: 200px; height: 200px;"></object>-->
    </div>
    <br>
  </div>
 </div>

  </section>



  <!--&lt;!&ndash;Display database of resources&ndash;&gt;
  <h2>List of Student-Added Resources</h2>
  &lt;!&ndash;<h4>There are {{filtered.length}} results:</h4>&ndash;&gt;
  <div class="displayresources" ng-repeat='link in linkList | filter:search | orderBy:title' >
    <div class="row">
      <div class="col-md-6" ng-hide="editting">
        <h4><a ng-href="/promocode-Filter/marketing-samples/{{link.filename}}" >{{link.title}} </a></h4><p></p>
        <strong>Promo Code:</strong> {{link.promocode}}<br>
        <strong>expires:</strong> {{link.expires}}<br>
        <strong>See File:  </strong><a ng-href="/promocode-Filter{{link.filename}}">{{link.filename}}</a><br>


      </div>
      <div class="col-md-6">
        &lt;!&ndash; all buttons &ndash;&gt;
        <div class="allbuttons">
          &lt;!&ndash; Button to go to link &ndash;&gt;
          <a ng-href="{{link.link}}"><button class="btn btn-info btn-sm btn-danger" ng-hide="editting">Go There Now</button></a>
          &lt;!&ndash;  Button to preview &ndash;&gt;
          <button class="btn btn-info btn-sm btn-warning" ng-click="preview=!preview;" ng-hide="editting">More Details</button>
          &lt;!&ndash;  buttons show when user sees details but hides when user is editting &ndash;&gt;
          <button ng-click="editting=!editting" class="btn btn-info btn-sm btn-blue" ng-hide="editting">Edit</button>

        </div>

      </div>
    </div>

    &lt;!&ndash;More Detail&ndash;&gt;
    <div class="row">


      <div class="col-md-6" ng-show="preview" >
        <div ng-hide="editting">
          <strong>Category:</strong>{{link.param.category}}<br>
          &lt;!&ndash;TrueProp2222: <span ng-init="trueProp(link.category)"></span> <span id="true-category"></span><br>&ndash;&gt;
          <strong>Type of Resource:</strong>{{link.resourcetype}}<br>


        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12" ng-show="preview">
        <div ng-hide="editting">
          <strong> Preview: </strong> <br>
          <iframe name="{{link.title}}" src="{{link.link}}" height="300px" width="100%"></iframe>

        </div>
      </div>
    </div>





    <div class="row">
      <div class="col-md-6">
        <form name="editResourceForm" ng-show="editting">
          <h4>Edit Resource</h4><p></p>
          <strong>title:</strong>
          <input type="text" ng-model="link.title"></h4>
          <p></p>
          <strong>Description:</strong><br>
          <textarea rows="4" cols="63" ng-model="link.description"></textarea>
          <p></p>
          <strong>URL:  </strong>
          <input type="text" ng-model="link.link">
          <p></p>
          <strong>Categories</strong><br>
          <input type="checkbox" name="category" ng-model="link.category.html" value="html" >html<br>
          <input type="checkbox" name="category" ng-model="link.category.css" value="css">css<br>
          <input type="checkbox" name="category" ng-model="link.category.javascript" value="javascript">javascript<br>
          <input type="checkbox" name="category" ng-model="link.category.jquery" value="jquery">jquery<br>
          <input type="checkbox" name="category" ng-model="link.category.angular" value="angular">angular.js<br>
          <input type="checkbox" name="category" ng-model="link.category.node" value="node" >node.js<br>
          <input type="checkbox" name="category" ng-model="link.category.express" value="express">express.js<br>
          <input type="checkbox" name="category" ng-model="link.category.mongul" value="mongul">mongul.js<br>
          <p></p>
          <strong>Type of Resource</strong><br>
          <input type="checkbox" name="resourcetype" ng-model="link.resourcetype.practice" value="practice">practice exercises <br>
          <input type="checkbox" name="resourcetype" ng-model="link.resourcetype.video" value="video">video<br>
          <input type="checkbox" name="resourcetype" ng-model="link.resourcetype.pics" value="pictures and diagrams">pictures and diagrams<br>
          <input type="checkbox" name="resourcetype"  ng-model="link.resourcetype.tutorial" value="tutorial">tutorial<br>
          <input type="checkbox" name="resourcetype"  ng-model="link.resourcetype.tool" value="tool">tool to use for project
          <p></p>

          &lt;!&ndash;  buttons show up only when user is editing form &ndash;&gt;
          <button type= "submit" ng-click="saveLink(link); editting=!editting" class="btn btn-info btn-sm btn-danger">Update Changes</button>
          <button ng-click="reset();
                              editting=!editting" class="btn btn-info btn-sm btn-warning">Cancel</button>
          <button ng-click="deleteLink(link); editting=!editting" class="btn btn-info btn-sm btn-blue">Delete</button>
        </form>
      </div>
    </div>




    <hr class="line">
-->
  </div>
</div>


<!--TO DO:
-Category and type of resource- shows only "true" properties
-database disappears after I take off the filter
-Add reviews to page
-Cancel - doesn't save the form but shows a change if u don't refresh

 -Instead of copying image, some type of preview or iframe


EXTRA
-Modal - to see PREVIEW
-category is represented as pictures (Ex: HTML true has html pic)
-Login through FB, Google+, Github
-Reviews with stars
-Add button so user can add categories - must be logged in


DOES WORK:
-Get dropdown list filter to work - ngOptions?
-saving/updating works
-->

<?php
    $files = array();

    $dir = opendir('/marketing-samples');
    while ($file = readdir($dir)) {
        if ($file == '.' || $file == '..') {
            continue;
        }

        $files[] = $file;
    }

    header('Content-type: application/json');
    echo json_encode($files);
?>

<!--Google analytics-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60337846-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<!-- AngularJS -->
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"></script>
<!--<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.1/angular-route.min.js"></script>-->

<!-- Firebase -->
<script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
<!-- AngularFire -->
<script src="https://cdn.firebase.com/libs/angularfire/0.9.2/angularfire.min.js"></script>
<script src="app.js" type="text/javascript"></script>
</body>
</html>
